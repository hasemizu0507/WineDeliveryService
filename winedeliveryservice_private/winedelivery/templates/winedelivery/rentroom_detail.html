
{% extends "base.html" %}
{% load mathfilters %}
{% load staticfiles %}

{% block title %}物件の一覧{% endblock title %}

{% block content %}
<h4 class="mt-4 border-bottom">物件の詳細</h4>
{% if user.is_superuser or rentroom.is_active or user.profile.id == rentroom.owner_id %} 

<table class="table table-striped table-bordered">
    <tbody>
        <tr>
            <th scope="row">物件ID</th>
            <td>{{ rentroom.id }}</td>
        </tr>
        <tr>
            <th scope="row">所在地</th>
            <td>{{ rentroom.pref_name|add:rentroom.city_name|add:rentroom.district_name }}</td>
        </tr>
        <tr>
            <th scope="row">築年</th>
            <td>{{ rentroom.built_year }}</td>
        </tr>
        <tr>
            <th scope="row">構造</th>
            <td>{{ rentroom.structure }}</td>
        </tr>
        <tr>
            <th scope="row">マンション最上階数</th>
            <td>{{ rentroom.top_floor_num }}</td>
        </tr>
        <tr>
            <th scope="row">間取り</th>
            <td>{{ rentroom.room_type }}</td>
        </tr>
        <tr>
            <th scope="row">専有面積</th>
            <td>{{ rentroom.area }}</td>
        </tr>
        <tr>
            <th scope="row">平米単価</th>
            <td>{{ rentroom.price }}</td>
        </tr>
        <tr>
            <th scope="row">最寄り駅</th>
            <td>{{ rentroom.nearest_station }}</td>
        </tr>
        <tr>
            <th scope="row">最寄り駅までの距離</th>
            <td>{{ rentroom.dist_to_nearest_station }}</td>
        </tr>
    </tbody>
</table>
<form action="{% url 'winedelivery:edit_cart' rentroom_id=rentroom.id %}?from_page={{page}}" method="post">
    {% csrf_token %}
    <input type="submit" value="add/delete" class="btn btn-primary mt-2">
</form>

{% else %}
    <p>この物件はまだ承認されていないため、物件を追加したユーザとadmin以外は見ることができません。</p>
    <p>adminが物件を承認するのをお待ちください。</p>
{% endif %}

{% if user.is_superuser and rentroom.is_active == False %} 
    <div style="color:red;background:yellow;font-weight: bold;">
        <p>Hello, Admin</p>
        <p>承認するには<a href="{% url 'winedelivery:assess_apply' rentroom_id=rentroom.id %}">ここ</a>をクリック</p>
    </div>
{% endif %}


<a href="{% url 'winedelivery:rentroom_list' %}?page={{ page }}">一覧へ戻る</a>
{% endblock %}





{% block extra_js %}
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
    integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
    crossorigin=""></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-tilelayer-geojson/1.0.4/TileLayer.GeoJSON.min.js"></script>
<script src="{% static 'winedelivery/js/map_preview.js' %}"></script>
{% endblock %}


